<h1><%= @current_user.name %>'s Profile</h1>
</br>

Images (<%= @published_count %> published):

</br>

<% @current_user.images.each do |image| %>
  <div class="image_box">
    <img src="<%= image.image_url %>">
  Published? <%= image.published %>
  <% if !image.published && @published_count < 5 %>
    <form action="/images/<%= image.id %>/update" method="post">
      <input type="hidden" name="_method" value="put">
      <input type="hidden" name="image[published]" value="true">
      <%= token_tag %>
      <button type="submit">Publish</button>
    </form>
  <% end %>
  <% if image.published %>
    <form action="/images/<%= image.id %>/update" method="post">
      <input type="hidden" name="_method" value="put">
      <input type="hidden" name="image[published]" value="false">
      <%= token_tag %>
      <button type="submit">Unpublish</button>
    </form>
    <form action="/images/<%= image.id %>" method="get">
      <button type="submit">View</button>
    </form>
  <% end %>
  </br>
    Number of captions: <%= image.captions.count %>
  </br>
  </div>
<% end %>


Create a new image:
<form action="/images/new" method="get">
    <button>Select Image</button>
</form>

Captions:
</br>
<% @current_user.captions.each do |caption| %>
  <div class="caption_box">
    Image: <img src="<%= caption.image.image_url %>">
    Message: <%= caption.message %>
    Upvotes:  <%= caption.get_upvotes.size %>
    Downvotes:  <%= caption.get_downvotes.size %>
    Score: <%= caption.get_upvotes.size - caption.get_downvotes.size %>
    <form action="/captions/<%= caption.id%>" method="post">
      <input type="hidden" name="_method" value="delete">
      <%= token_tag %>
      <button type="submit">Delete</button>
    </form>
  </br>
  </div>
<% end %>
